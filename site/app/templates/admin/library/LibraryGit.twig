<form class="form-signin" action="javascript:void(0);" id="libraryGitForm">
    <div class="option row">
        <div class="option-desc col-md-6">
            <label for="instructions_url">
                <div class="option-title">Git URL</div>
                <div class="option-alt">What is the url to the Git repo?</div>
            </label>
        </div>
        <div class="option-input col-md-6">
            <input type='text' name='git_url' id='git_url' class="auto_save" placeholder="https://example.com/exampleRepo.git" />
        </div>
    </div>
    <div class="row">
        <input class="btn btn-primary" type="submit" value="Submit"/>
    </div>
</form>
<script type="text/javascript">
    $(function() {
        $("#libraryGitForm").submit(function(e){
            e.preventDefault();
            var form = e.target;
            var submitButton = form.querySelector("input[type='submit']");
            submitButton.disabled = true;
            $.ajax({
                url: '{{ git_submit_url }}',
                data: {
                    csrf_token: '{{ csrf_token }}',
                    git_url: form.git_url.value
                },
                type: 'POST',
                success: function(data) {
                    try {
                        var jsondata = JSON.parse(data);
                        if (jsondata['status'] == "success") {
                            displaySubmissionMessage(jsondata);
                            location.reload(true);
                        } else {
                            displaySubmissionMessage(jsondata);
                        }
                    }
                    catch (e) {
                        displaySubmissionMessage({
                            status: "fail",
                            message: "Error parsing response from server."
                        });
                        console.log(data);
                    }
                    submitButton.disabled = false;
                },
                error: function(request, status, error) {
                    displaySubmissionMessage({
                        status: "fail",
                        message: request.responseText
                    });
                    submitButton.disabled = false;
                }
            });
        });
    });
</script>
